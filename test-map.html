<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>é«˜å¾·åœ°å›¾æµ‹è¯•</title>
    <style>
        #container {
            width: 100%;
            height: 400px;
            background-color: #f0f0f0;
        }
        .info {
            padding: 20px;
            background: #f8f9fa;
            margin: 20px 0;
            border-radius: 8px;
        }
        .error {
            color: red;
        }
        .success {
            color: green;
        }
    </style>
</head>
<body>
    <div class="info">
        <h3>é«˜å¾·åœ°å›¾é…ç½®æµ‹è¯•</h3>
        <p>API Key: 0ac71e274389a89aaf832624ed8eaead</p>
        <p id="status">æ­£åœ¨åˆå§‹åŒ–...</p>
    </div>
    
    <div id="container"></div>
    
    <script>
        const API_KEY = '0ac71e274389a89aaf832624ed8eaead';
        const statusEl = document.getElementById('status');
        
        function updateStatus(message, isError = false) {
            statusEl.textContent = message;
            statusEl.className = isError ? 'error' : 'success';
            console.log(message);
        }
        
        // åŠ¨æ€åŠ è½½é«˜å¾·åœ°å›¾JS API
        function loadAMapScript() {
            return new Promise((resolve, reject) => {
                if (window.AMap) {
                    resolve(window.AMap);
                    return;
                }
                
                const script = document.createElement('script');
                script.src = `https://webapi.amap.com/maps?v=2.0&key=${API_KEY}`;
                script.onload = () => {
                    if (window.AMap) {
                        updateStatus('âœ… é«˜å¾·åœ°å›¾JS APIåŠ è½½æˆåŠŸ');
                        resolve(window.AMap);
                    } else {
                        reject(new Error('AMapå¯¹è±¡ä¸å­˜åœ¨'));
                    }
                };
                script.onerror = (error) => {
                    reject(new Error('è„šæœ¬åŠ è½½å¤±è´¥'));
                };
                document.head.appendChild(script);
            });
        }
        
        // åˆå§‹åŒ–åœ°å›¾
        async function initMap() {
            try {
                updateStatus('æ­£åœ¨åŠ è½½é«˜å¾·åœ°å›¾JS API...');
                
                const AMap = await loadAMapScript();
                
                updateStatus('æ­£åœ¨åˆ›å»ºåœ°å›¾å®ä¾‹...');
                
                const map = new AMap.Map('container', {
                    center: [116.397428, 39.90923], // åŒ—äº¬å¤©å®‰é—¨
                    zoom: 10,
                    viewMode: '3D'
                });
                
                // ç›‘å¬åœ°å›¾åŠ è½½å®Œæˆäº‹ä»¶
                map.on('complete', () => {
                    updateStatus('ğŸ‰ åœ°å›¾åŠ è½½å®Œæˆï¼é…ç½®æ­£ç¡®ï¼');
                });
                
                // ç›‘å¬åœ°å›¾åŠ è½½é”™è¯¯äº‹ä»¶
                map.on('error', (error) => {
                    updateStatus(`âŒ åœ°å›¾åŠ è½½é”™è¯¯: ${error.message || error}`, true);
                });
                
                // æ·»åŠ ä¸€ä¸ªæ ‡è®°ç‚¹
                const marker = new AMap.Marker({
                    position: [116.397428, 39.90923],
                    title: 'åŒ—äº¬å¤©å®‰é—¨'
                });
                
                map.add(marker);
                
            } catch (error) {
                updateStatus(`âŒ åˆå§‹åŒ–å¤±è´¥: ${error.message}`, true);
                console.error('åˆå§‹åŒ–å¤±è´¥:', error);
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åœ°å›¾
        document.addEventListener('DOMContentLoaded', initMap);
    </script>
</body>
</html> 